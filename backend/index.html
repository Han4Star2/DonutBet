<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DonutBet</title>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.16.1/dist/gsap.min.js"></script>
<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #1e1e2f, #2e2e3f);
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white;
}

h1 {
  margin-top: 20px;
  font-size: 2rem;
  text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

/* Home/Login */
#home, #games, #coinflip {
  display: none;
  width: 100%;
  max-width: 500px;
  text-align: center;
  margin-top: 30px;
}

button {
  margin: 10px;
  padding: 15px 30px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  font-size: 1.1rem;
  user-select: none;
}

button:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 15px rgba(0,0,0,0.3);
}

button:active {
  transform: scale(1.2);
  box-shadow: 0 12px 20px rgba(0,0,0,0.5);
}

input[type="number"] {
  padding: 10px 15px;
  margin-top: 15px;
  font-size: 1.1rem;
  border-radius: 10px;
  border: none;
  text-align: center;
  width: 120px;
}

/* Coinflip */
.coinflip-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 20px;
}

.coin {
  width: 150px;
  height: 150px;
  background: radial-gradient(circle at 30% 30%, #ffce00, #ff9900);
  border-radius: 50%;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
  margin-bottom: 30px;
  perspective: 1000px;
}

.result {
  margin-top: 25px;
  font-size: 1.5rem;
  font-weight: bold;
  min-height: 40px;
}

.games-list button {
  width: 80%;
  margin: 10px 0;
}

</style>
</head>
<body>

<h1>DonutBet</h1>

<!-- Home / Login -->
<div id="home">
  <p><a href="/auth/discord"><button>Login mit Discord</button></a></p>
</div>

<!-- Spieleübersicht -->
<div id="games">
  <h2>Spiele</h2>
  <div class="games-list">
    <button id="coinflipBtn">Coinflip</button>
    <!-- später Blackjack Button -->
  </div>
</div>

<!-- Coinflip Seite -->
<div id="coinflip">
  <h2>Coinflip</h2>
  <div class="coinflip-container">
    <div class="coin" id="coin"></div>
    <div>
      <button id="headsBtn">Heads</button>
      <button id="tailsBtn">Tails</button>
    </div>
    <input type="number" id="betAmount" placeholder="Bet Amount" />
    <button id="betBtn">Bet</button>
    <div class="result" id="resultText"></div>
  </div>
</div>

<script>
// Seiten Management
const home = document.getElementById("home");
const games = document.getElementById("games");
const coinflipPage = document.getElementById("coinflip");
const coinflipBtn = document.getElementById("coinflipBtn");

// Zeige Home zuerst
home.style.display = "block";

coinflipBtn.onclick = () => {
  games.style.display = "none";
  coinflipPage.style.display = "block";
};

// --------------------
// Coinflip Logic
// --------------------
const coin = document.getElementById("coin");
const headsBtn = document.getElementById("headsBtn");
const tailsBtn = document.getElementById("tailsBtn");
const betBtn = document.getElementById("betBtn");
const betAmount = document.getElementById("betAmount");
const resultText = document.getElementById("resultText");

let choice = "heads";

headsBtn.onclick = () => choice = "heads";
tailsBtn.onclick = () => choice = "tails";

// Buttons skalieren beim Halten (Mouse + Touch)
[headsBtn, tailsBtn].forEach(btn => {
  btn.addEventListener("mousedown", () => btn.style.transform = "scale(1.2)");
  btn.addEventListener("mouseup", () => btn.style.transform = "scale(1)");
  btn.addEventListener("mouseleave", () => btn.style.transform = "scale(1)");
  btn.addEventListener("touchstart", () => btn.style.transform = "scale(1.2)");
  btn.addEventListener("touchend", () => btn.style.transform = "scale(1)");
});

betBtn.onclick = () => {
  const bet = parseInt(betAmount.value);
  if (!bet || bet <= 0) {
    alert("Enter a valid bet");
    return;
  }

  // Münze drehen Animation
  gsap.fromTo(coin, { rotationY: 0 }, { rotationY: 720, duration: 1, ease: "power2.inOut" });

  // Zufallsergebnis
  const outcome = Math.random() < 0.5 ? "heads" : "tails";

  setTimeout(() => {
    if (outcome === choice) {
      resultText.textContent = `You Win! +${bet} Coins`;
      resultText.style.color = "#00ff00";
      gsap.fromTo(resultText, { scale: 0.5, opacity: 0 }, { scale: 1.2, opacity:1, duration:0.5, ease:"back.out(1.7)" });
      // TODO: Coins über Backend erhöhen
    } else {
      resultText.textContent = `You Lose! -${bet} Coins`;
      resultText.style.color = "#ff4d4d";
      gsap.fromTo(resultText, { scale: 0.5, opacity: 0 }, { scale: 1, opacity:1, duration:0.5, ease:"power1.out" });
      // TODO: Coins über Backend abziehen
    }
  }, 1000);
};
</script>

</body>
</html>
